# API Hardener для 3x-ui

Автоматически добавляет защищённый API (токены, rate limit, управление пользователями) и UI-вкладку с документацией и настройками прямо в панель.

## Быстрый старт

```bash
bash <(curl -fsSL https://raw.githubusercontent.com/Kavis1/3X-UI-testapi/main/api-hardener/install.sh) /usr/local/x-ui
```

- `/usr/local/x-ui` — стандартный каталог установки панели 3x-ui (измените, если установлен в другом месте).
- Скрипт распакует payload, выполнит `go mod tidy` и соберёт CLI `api-guard`.

## После установки

1) В директории панели выполните:
```bash
./api-guard install
```
   - создаст bootstrap API-пользователя и включит token-only режим.
2) Перезапустите сервис панели.
3) В панели появятся:
   - Вкладка **API** в настройках (создание/вкл/выкл/ротация токенов, лимиты).
   - Пункт меню **Документация API** со списком эндпоинтов и примерами вызова.

## Что внутри payload
- Backend: модели API-пользователей, middleware с токенами+rate limit, контроллеры админ-API, маршруты `/panel/api` защищены токенами.
- UI: вкладка «API» в настройках, страница «Документация API», обновлённые переводы.
- CLI: `cmd/api-guard` для управления токенами/лимитами из терминала.

## Требования
- Go установлен на целевой машине.
- `bash`, `curl`, `tar`, `base64` (стандарт для Linux). Если нет `rsync`, будет использован `cp`.
